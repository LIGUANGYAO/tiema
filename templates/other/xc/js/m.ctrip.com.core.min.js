
var ctripmobi={author:'m.ctrip.com',version:'2.0'};ctripmobi.utils={website:'/html5',fileName:'.html',restful:location.host.match(/waptest\.ctrip\.com|localhost|172\.16|127\.0|210\.13/ig)?'http://waptest.ctrip.com/restapi2':location.host.match(/10.\.8/ig)?"http://10.8.2.111/restapi":"http://m.ctrip.com/restapi",canStorage:function(){if(!!window.localStorage)return true;return false;},setStorage:function(name,value){if(ctripmobi.utils.canStorage()){try{localStorage.removeItem(name);localStorage.setItem(name,value);}catch(err){if(err&&err.name){var reg=/(quota.*)$/;var m=reg.test(err.name.toLowerCase());if(m){ctripmobi.utils.MsgBox('您开启了秘密浏览或无痕浏览模式，请关闭');return;}}}}},getStorage:function(name){if(ctripmobi.utils.canStorage()){var v=localStorage.getItem(name);var d=null;try{d=v?JSON.parse(v):null;}catch(err){d=null;}
if(d&&d.timeout){var serverDate=localStorage.getItem('SERVERDATE');serverDate=serverDate?JSON.parse(serverDate):null;var realDate=serverDate&&serverDate.date?Date.ParseString(serverDate.date):new Date();var n=realDate;var t=Date.ParseString(d.timeout);if(d.timeby){if(t-n>=0){return d;}}else{if(t-Date.ParseString(n.format('yyyy-MM-dd'))>=0){return d;}}
localStorage.removeItem(name);return null;}
return d;}},removeStorage:function(key,isClean){if(ctripmobi.utils.canStorage()){if(isClean){localStorage.removeItem(key);}
var v=localStorage.getItem(key);var d=v?JSON.parse(v):null;if(!d||!d.timeout){localStorage.removeItem(key);}else{var serverDate=ctripmobi.utils.getStorage('SERVERDATE'),realDate=serverDate&&serverDate.date?Date.ParseString(serverDate.date):new Date();var n=realDate;var t=Date.ParseString(d.timeout);if(t-n<0||t-Date.ParseString(n.format('yyyy-MM-dd'))<0){localStorage.removeItem(key);}}}},setSession:function(key,value){if(window.sessionStorage){try{sessionStorage.removeItem(key);sessionStorage.setItem(key,value);}catch(err){if(err.name=='QUOTA_EXCEEDED_ERR'){ctripmobi.utils.MsgBox('您开启了秘密浏览或无痕浏览模式，请关闭');}}}},getSession:function(key){if(window.sessionStorage){try{var temp=sessionStorage.getItem(key);return temp?JSON.parse(temp):null;}catch(err){return null;}}},removeSession:function(key){if(window.sessionStorage){sessionStorage.removeItem(key);}},cleanSession:function(){if(window.sessionStorage){sessionStorage.clear();}},getUrlParam:function(name,checkKeyExist){var urls=document.location.search,re=new RegExp("(\\\?|&)"+name+"=([^&]+)(&|$)","i"),m=urls.match(re);if(m)return m[2];if(checkKeyExist){return null;}
else{return'';}},getFromUrl:function(){var urls=document.location.search;if(urls&&urls.length>0){var aParams=ctripmobi.utils.getUrlParam('from');return aParams||'';}
return'';},getUserInfo:function(){var v=ctripmobi.utils.getStorage("USERINFO");if(v&&v.data&&v.data.Auth&&v.data.Auth.length>0)
return v;ctripmobi.utils.removeStorage('USERINFO',true);return null;},getLoginLog:function(){return ctripmobi.utils.getStorage("USERLOGINLOG");},logOut:function(url,userinfo){ctripmobi.utils.OnLoading();var userLog=ctripmobi.utils.getStorage('USERLOGINLOG');userLog={LoginName:(userinfo&&userinfo.data?userinfo.data.LoginName:(userLog?userLog.LoginName:""))};ctripmobi.utils.setStorage('USERLOGINLOG',JSON.stringify(userLog));ctripmobi.utils.cleanSession();var reg_remove_list=['FLIGHTINFO','ORDERLIST_TRAIN','VACATION_LSIT_FILTER','USERINFO','TICKETDETAILDATA','COMMENTORDER','DATALIST','COMMENTORDER','ORDERLIST','ORDERPARAM','HOTELDETAIL','TRAINSSEARCHINFO','VACATION_DETAILS','VACATION_ORDERINFO','USER','TrainOrderId','CUSTOMER_HOTELORDER_ID','CAR_CUSTOMER_ADDR','TRAIN_ORDER_LIST','USER_WAITFORTCOMMENT_ORDER_LIST','PERSONNAL_INFO','VERIFYTIMEOUT','CUSTOMER_TRAVEL_LIST','FLIGHT_PASSENGERRESULT','VACATION_PRODUCT','VACATION_BOOKINGINFO','VACATION_PRODUCTIMAGELIST','VACATION_ITEMDAYPRICE','USER_GROUP_ORDERPARAM','VACATION_GUESTUSER','VACATION_TICKETDETAIL','VACATION_SELECTEDTICKET','FLIGHT_CUSTOMER_ADDR_LIST','CUSTOMER_HOTELORDER_DETAIL','CUSTOMER_HOTELORDER_LIST','CAR_CUSTOMER_ADDR_LIST','TUAN_ORDER_INFO','HEADSTORE','MYCTRIP_COUPON_LIST','MYCTRIP_HOTEL_FAV_LIST','FLIGHT_CUSTOMER_ADDR','USER_FLTINTL_ORDERDETAIL','GROUP_RETURNPAGE','TUAN_ORDER_LIST','ORDERDETAILID','OrderDetailReturnTarget','ORDERDETAILID','FLTINTL_RETURNPAGE','fltintlOrderId','FltintlListModelresult','VACATION_SUBMITRESULT','TICKET_ORDERINFO','FLIGHT_SEARCH_SUBJOIN','FLIGHT_PASSENGEREDIT','FLIGHT_PASSENGERCHOOSE','FLIGHT_OPER_ADDR','zqInCityInfo','zqInCityDateStore','CUSTOMER_GATE_LIST','MYCTRIP_TRAVELTICKET_LIST','CUSTOMER_VACATION_TICKET_DETAIL','USER_TRAIN_ORDERDETAIL','BANK_SELECT_ADDR','ACCOUNT_TRANSFER','TRANS_ACCOUNT_INFO','Modify_Pre_PhoneStore','EXCHANGE_VALIDATE_NUM','CHECK_EXCHANGE_PHONE','LastInCitySelectDateTime','LastzqInAirportSelectDateTime','zqInAirportInfo','zqInAirportDateStore','USER_FLIGHT_ORDERPARAM','zqInAirportDateAndAddressStore','zqInCityDateAndAddressStore','zqInCitySelectStore','zqInAirportSelectStore','FLIGHT_DETAILS','FLIGHT_ORDERINFO','USER_FLIGHT_ORDERLIST','USER_FLIGHT_ORDERDETAIL','FLIGHT_RETURNPAGE','FLIGHT_SELECTED_INFO','FLIGHT_PICK_TICKET_SELECT','FLIGHT_LIST_FILTER','FLIGHT_PICK_TICKET','FLIGHT_PICK_TICKET_PARAM','TICKET_LIST','TUAN_DETAILS','TUAN_LIST','carOrderId','FLIGHT_LIST','CAR_ORDER_DETAIL','MYCTRIP_HOTEL_FAV_LIST','FLTINTL_SELECTED_INFO','VACATION_LIST','VACATION_TICKETLIST','OrderDetailParamStore','VACATIONS_PRODUCT_DETAIL','VACATIONS_PRODUCT_DETAIL_PARAM','VACATIONS_PRODUCT_LIST','VACATIONS_PRODUCT_LIST_PARAM','CAR_PRODUCT_LIST','CAR_PRODUCT_LIST_PARAM','CAR_PRODUCT_DETAIL','CAR_PRODUCT_DETAIL_PARAM','FLIGHT_DETAILS_PARAM','FLTINTL_LIST','FltintlListModelParam','VACATIONS_PRODUCT_COMMENT_PARAM','TUAN_ORDER_DETAIL'];for(var s in reg_remove_list){ctripmobi.utils.removeStorage(reg_remove_list[s],true);}
$.ajax({url:ctripmobi.utils.website+'/Account/Logout',type:'post',dataType:'json',success:function(data){userinfo=null;setTimeout(function(){ctripmobi.utils.redirectTo(url);},300);},error:function(err){setTimeout(function(){ctripmobi.utils.redirectTo(url);},300);}});},Confirm:function(options){var buttons=[{'value':'取消','class':'ctrip-cancel','event':{'click':function(){this.Close()}}},{'value':'确定','class':'ctrip-confirm','event':{'click':function(){this.Close();options.callback();}}}];if(options.Cancel){buttons[0].value=options.Cancel}if(options.Ok){buttons[1].value=options.Ok}var a=new Oui.Alert({Buttons:buttons,Title:'提示信息',Content:options.message});a.Open();},Toast:function(text,callback){var h=$('<div class="ui-loader"><h1>'+text+'</h1></div>');$('body').append(h);var hand=function(){var toastWidth=0,toastHeight=0;if(window.jQuery){boxHeight=h.outerHeight();toastWidth=h.outerWidth();}else{toastWidth=h.width();toastHeight=h.height();}
var pos=Oui.Tools.GetCenterPos();h.css({'position':'absolute','margin':'0px','top':(pos.top-toastHeight/2)+'px','left':(pos.left-toastWidth/2)+'px'});};$(window).bind('scroll',hand);$(window).bind('resize',hand);hand();setTimeout(function(){$('.ui-loader').hide();$('.loading-ui').remove();Oui.Loading.Close();typeof callback=='function'&&callback();$(window).unbind('scroll',hand);$(window).unbind('resize',hand);},2000);},MsgBox:function(text,callback){if($('.loading-ui')){$('.loading-ui').remove()};var h=$('<div class="msgbox-ui"><h1>'+text+'</h1></div>');$('body').append(h);setTimeout(function(){$('.msgbox-ui').remove();typeof callback=='function'&&callback();},2000);},Prompt:function(options){var buttons=[{'value':'取消','class':'ctrip-cancel','event':{'click':function(){this.Close()}}},{'value':'确定','class':'ctrip-confirm','event':{'click':function(){this.Close();typeof options.callback=='function'&&options.callback()}}}];if(options.Cancel){buttons[0].value=options.Cancel}if(options.Ok){buttons[1].value=options.Ok}var a=new Oui.Alert({Buttons:buttons,Title:'提示信息',Content:options.message});a.Open()},Note:function(options){Oui.Loading.Close();var buttons=[{'value':options.ButtonTitle,'class':'ctrip-confirm','event':{'click':function(){this.Close();typeof options.callback=='function'&&options.callback();}}}];var a=new Oui.Alert({Buttons:buttons,Title:(options.Title?options.Title:"信息提示"),Content:options.Text});a.Open()},Alert:function(messageText){var buttons=[{'value':'我知道了','class':'ctrip-confirm','event':{'click':function(){this.Close()}}}];var a=new Oui.Alert({Buttons:buttons,Title:'提示信息',Content:messageText});a.Open()},ShowLoad:function(notMask){Oui.Loading.Open(notMask);},OnLoading:function(){$('body').append('<div class="loading-ui"><div class="cui-breaking-load"><div class="cui-w-loading"></div><i class="cui-white-logo"></i></div></div>');},EndLoading:function(){$('.loading-ui').remove();},HideLoad:function(){Oui.Loading.Close();},renderU:function(data,dParent,dTemplate){if(typeof data==='object'){var compiled=_.template(dTemplate.html());var html=compiled(data);dParent.html(html);}},render2U:function(data,tpl){tpl=tpl||'';var compiled=_.template(tpl);var html=compiled(data);return html;},render:function(data,dParent,dTemplate){if(typeof data==='object'){dParent.setTemplate(dTemplate.html());dParent.processTemplate(data);}},render2:function(data,tpl){var div=$('<div>');tpl=tpl||'';div.setTemplate(tpl);div.processTemplate(data);return div.html();},getWeeks:function(week){return week==1?"周一":week==2?"周二":week==3?"周三":week==4?"周四":week==5?"周五":week==6?"周六":"周日";},isSuportAnimate:function(){var u=navigator.userAgent;if(u){u=u.toUpperCase();if(u.indexOf('HW-HUAWEI')>-1)return false;return u.indexOf('IPHONE')>-1||u.indexOf('MAC')>-1||u.indexOf('MAC OS')>-1||u.indexOf('WINDOWS PHONE')>-1;}return false;},isPC:!/(iphone|ios|android|mini|mobile|mobi|Nokia|Symbian|iPod|iPad|Windows\s+Phone|MQQBrowser|wp7|wp8|UCBrowser7|UCWEB|360\s+Aphone\s+Browser|AppleWebKit)/i.test(navigator.userAgent),Cookie:function(window,document){var Cookie={};Cookie.Set=function(name,value,expire,path,domain){var c=[];if(!name)return false;c.push(name+'='+escape(value));if(Object.prototype.toString.call(expire)=='[object Number]'){var now=new Date();second=parseInt(expire*86400);now.setSeconds(second);var utc=now.toGMTString();c.push('expires='+utc)}path&&c.push('path='+path);domain&&c.push('domain='+domain);document.cookie=c.join(';')};Cookie.Get=function(name){var result;if(name){var RegCookie=new RegExp('\\b'+name+'=([^;]*)\\b'),match=RegCookie.exec(document.cookie);result=match&&unescape(match[1])}else{var cookies=document.cookie.split(';'),i,c;result={};for(i=0,len=cookies.length;i<len;i++){c=cookies[i].split('=');result[c[0]]=unescape(c[2])}}return result};Cookie.Del=function(name){var exp=new Date();exp.AddHours(-1000);var cval=Cookie.Get(name);if(cval){document.cookie="name="+cval+";domain=.ctrip.com;expires="+exp.toGMTString()+";path=/";}else{document.cookie="name=;domain=.ctrip.com;expires="+exp.toGMTString()+";path=/";}};return Cookie}(window,document),StringToTime:function(str){str=str||'';var regtime=/^(\d{4})\-?(\d{2})\-?(\d{2})$/i;if(str.match(regtime)){str=str.replace(regtime,"$2/$3/$1");}
var t=Date.parse(str);var today=Date.parse((new Date()).format('MM/dd/yyyy'));t=(isNaN(t)||t<today)?new Date():new Date(t);return t;},Back:function(url,isReplace){if(url){if(isReplace){location.replace(url);}else{location.href=url;}}else{history.back();}},setSource:function(key){ctripmobi.utils.setStorage('SOURCE',JSON.stringify(key));},getSource:function(){return ctripmobi.utils.getStorage('SOURCE');},JumpUrl:function(url,isReplace,useOrigin){if(!url){url='/html5/';}else{if(!useOrigin&&!url.match(/html5/i)){url='/html5'+url;}}
if(isReplace){location.replace(url);}else{location.href=url;}},redirectTo:function(url,useOrigin){if(!url||url.length<=0){url='/html5/';}
else{if(!useOrigin&&!url.match(/html5/i)){url='/html5'+url;}}
location.href=url;},replaceContent:function(SALESOBJ){if(!SALESOBJ||!SALESOBJ.data){var utils=ctripmobi.utils;SALESOBJ=utils.getStorage('SALESOBJ');}
if(SALESOBJ&&SALESOBJ.data){var MARKLINKCLASS='.__hreftel__',MARKCONTCLASS='.__conttel__',MAREAPPADDRESS='.__appaddress__';if(SALESOBJ.data.tel){$(MARKLINKCLASS).each(function(){this.href="tel:"+SALESOBJ.data.tel;});$(MARKCONTCLASS).each(function(){var $this=$(this);$this.html(SALESOBJ.data.teltitle);});}
$(MAREAPPADDRESS).each(function(){var str=SALESOBJ.data.appurl?SALESOBJ.data.appurl:SALESOBJ.data.sid?'/market/download.aspx?from='+SALESOBJ.data.sid.toLowerCase():'/market/download.aspx?from='+SALESOBJ.data.sales.toLowerCase();this.href=str;});if(SALESOBJ&&SALESOBJ.data&&SALESOBJ.data.isseo){if(SALESOBJ.data.isseo=="1"){$("#appheader,#divListContent").css({"top":"50px"});$(".module").show();}}}}};ctripmobi.controllers={};ctripmobi.run=function(pages){var pages=pages,count=pages.length;for(var i=0;i<count;i++){var page=pages[i],id=page.id;e_array=page.event.split(',');for(var j=0;j<e_array.length;j++){var e=e_array[j];if($.trim(e).length==0){continue;}
$(document).ready(function(event){ctripmobi.controllers[id][e](event);});}}};window.UsingNamespace=Function.usingNamespace=function(a){var ro=window;if(String.IsNullOrEmpty(a)){return ro;};var co=ro;var nsp=a.split(".");for(var i=0;i<nsp.length;i++){var cp=nsp[i];if(!ro[cp]){ro[cp]={};};co=ro=ro[cp];};return co;};String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"").replace(/[<>&"]/g,function(c){return{'<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;'}[c];});};String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"**").length;};String._typeName="String";String.IsNullOrEmpty=function(v){return!(typeof(v)==="string"&&v.length!=0);};String.Parse=function(v){return String.tryParse(v,"");};String.TryParse=function(v,d){if(Object.isNull(v)||!(v["toString"])){return d;};return v.toString();};Date.prototype.AddHours=function(num){return new Date(this.setHours(this.getHours()+num));};Date.prototype.AddMinutes=function(num){return new Date(this.setMinutes(this.getMinutes()+num));};Date.prototype.AddSeconds=function(num){return new Date(this.setSeconds(this.getSeconds()+num));};Date.prototype.format=function(format){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));}for(var k in o)if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length));}return format;};Date.prototype.addDays=function(n,isDate){var oDate,getInfo=function(){var sYear=oDate.getFullYear(),sMonth=oDate.getMonth(),sDate=oDate.getDate();if(sMonth===0){sMonth=1;}else{sMonth=sMonth+1;}
if(sMonth<10){sMonth='0'+sMonth.toString();}
if(sDate<10){sDate='0'+sDate.toString();}return sYear+'-'+sMonth+'-'+sDate;};oDate=this.setDate(this.getDate()+n);oDate=new Date(oDate);if(isDate)return oDate;return getInfo();};Number.toChinese=function(){var UnitMap={0:'零',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'},BigUnitMap={10:'十',100:'百',1000:'千'};function getUnit(num){var n=num.toString().split('');var units=function(n){var ns=[];for(var i=0,I=n.length;i<I;i++){ns.push({Unit:n[i],BigUnit:('1'+Array(I-i).join('0'))})}return ns}(n);var str="",last;for(var i=0,I=units.length;i<I;i++){if(last!='0'||units[i].Unit!='0'){str+=function(){var list=n.slice(i).join('');if(i!=0&&list.match(/^0+$/i))return'';if(i==0&&units[i].BigUnit=='10'&&units[i].Unit=='1')return'';return UnitMap[units[i].Unit]}()+(units[i].Unit!='0'&&typeof BigUnitMap[units[i].BigUnit]!='undefined'?BigUnitMap[units[i].BigUnit]:'');last=units[i].Unit}}return str};return function(num){num=num||0;var str=num.toString().split('').reverse().join(''),reg=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/i,ex=reg.exec(str);var qian,wang,yi;if(ex[1])qian=ex[1].split('').reverse().join('');if(ex[2])wang=ex[2].split('').reverse().join('');if(ex[3])yi=ex[3].split('').reverse().join('');var result='';if(yi&&yi.match(/[^0]/i)){result=result+getUnit(yi)+'亿'}if(wang&&wang.match(/[^0]/i)){result=result+getUnit(wang)+'万'}if(!qian||!result||!qian.match(/^0+$/i)){result=result+getUnit(qian)}return result}}();JSON.CtripUnPack=function(collection){for(var result=[],keys=[],header=collection[0],len=header.length,length=collection.length,index=-1,k=-1,i=0,l=0,j,row;i<len;++i){keys[++k]=header[i];if(typeof header[i+1]=="object"){++i;for(j=1;j<length;++j){row=collection[j];row[l]=header[i][row[l]];};};++l;};for(var sj=1;sj<length;++sj){var srow=collection[sj];for(var m=0;m<keys.length;m++){if(typeof srow[m]=="object"){if(srow[m]&&srow[m].length>0){for(var subresult=[],subkeys=[],subheader=srow[m][0],sublen=subheader.length,sublength=srow[m].length,subindex=-1,subk=-1,subi=0,subl=0,subj;subi<sublen;++subi){subkeys[++subk]=subheader[subi];++subl;};for(subi=0,sublen=subkeys.length;subi<sublen;++subi){subkeys[subi]='o["'.concat(subkeys[subi].replace('"',"\\x22"),'"]=a[',subi,'];');}
var anonymous=Function("o,a",subkeys.join("")+"return o;");for(subj=1;subj<sublength;++subj){subresult[++subindex]=anonymous({},srow[m][subj]);}
collection[sj][m]=subresult;}}}}
for(i=0,len=keys.length;i<len;++i){keys[i]='o["'.concat(keys[i].replace('"',"\\x22"),'"]=a[',i,'];');}
var anonymous=Function("o,a",keys.join("")+"return o;");for(j=1;j<length;++j){result[++index]=anonymous({},collection[j]);}
return result;};(function(){if(!window.localStorage||!window.sessionStorage){window.location.href='http://m.ctrip.com/wap';}else{var ua=navigator.userAgent?navigator.userAgent:'';ua=ua.toLowerCase();if(ua.indexOf('android')>-1&&ua.indexOf('opera')>-1&&ua.indexOf('applewebkit')<=-1){window.location.href='http://m.ctrip.com/wap';}}})();(function(window){if(ctripmobi.utils.isPC&&!/HotelDetail/i.test(window.location.href)){window.location.href='http://www.ctrip.com';return;}})(window);!function($,utils){var BACKCALSS='.__return__';$(function(){$(BACKCALSS).on('click',function(){var $this=$(this);if($this.attr('data-backurl')){utils.Back($this.attr('data-backurl'));}else{utils.Back();}});});}($,ctripmobi.utils);(function(window,$){if(!ctripmobi.utils.InputClear){var isPlaceHolder='placeholder'in document.createElement('input');ctripmobi.utils.InputClear=function(input,clearClass,clearCallback){clearClass||(clearClass='');var $input=typeof input=='string'?$(input):input;$input.each(function(){var clearButton=$('<a class="clear-input '+clearClass+'" href="javascript:;"><span></span></a>'),$input=$(this);if(!isPlaceHolder){var placeholder=$input.attr('placeholder'),placeholderNode=$('<span class="placeholder-title'+(clearClass?' placeholder-'+clearClass:'')+'">'+placeholder+'</span>');}
clearButton.hide();$input.bind({'focus':function(){var val=$input.val().Trim();if(val!=''){clearButton.show();}},'input':function(){var val=$input.val().Trim();if($input.val().Trim()==''){clearButton.hide();}else{clearButton.show();}
if(!isPlaceHolder){if(val==''){placeholderNode.show();}else{placeholderNode.hide();}}},'blur':function(){var val=$input.val().Trim();if(!isPlaceHolder){if(val==''){placeholderNode.show();}else{placeholderNode.hide();}}
setTimeout(function(){clearButton.hide();},300);}});clearButton.bind('click',function(){$input.val('');$input.keyup();clearButton.hide();$input.focus();$input.trigger('input');typeof clearCallback=='function'&&clearCallback.call(this);});$input.after(clearButton);if(!isPlaceHolder){$input.after(placeholderNode);placeholderNode.bind('click',function(){$input.focus();});}
$input.blur();});};}})(window,$);Date.ParseString=function(str){var regtime=/(\d{4})-(\d{1,2})-(\d{1,2})(?:[T\s]+(\d{1,2}):(\d{1,2})(?:\:(\d{1,2}))?)?/i,timeval=regtime.exec(str),timestamp=0,time=null;if(timeval&&timeval.length){if(timeval.length>5){var dateStr=[timeval[1],timeval[2],timeval[3]].join('/')+' '+[timeval[4]||'00',timeval[5]||'00',timeval[6]||'00'].join(':');timestamp=Date.parse(dateStr);}else{var dataStr=[timeval[1],timeval[2],timeval[3]].join('/');timestamp=Date.parse(dataStr);}}else{timestamp=Date.parse(str)}
if(!isNaN(timestamp))
time=new Date(timestamp);return time};!function(window,$,utils){}(window,$,ctripmobi.utils);void function(ctripmobi){$.get(ctripmobi.utils.website+'/ClientData/GetServerDate?v='+new Date().format("yyyy-MM-dd hh:mm:ss"),function(text){ctripmobi.ServerDate=text;ctripmobi.ServerDateObj=Date.ParseString(ctripmobi.ServerDate);$("#copyno").html(ctripmobi.ServerDateObj.getFullYear());var d={'date':ctripmobi.ServerDate,timeout:ctripmobi.ServerDateObj.AddMinutes(30).format("yyyy-MM-dd hh:mm:ss")};ctripmobi.utils.setStorage('SERVERDATE',JSON.stringify(d));});}(ctripmobi);!function($){$(function(){var preloading=$('#preloading');if(preloading.length)preloading.hide();$('body').bind('selectstart',function(e){e.preventDefault();return false;});});}($);!function(window,$,utils){var errorFunction=function(positionError){switch(positionError.code){case positionError.TIMEOUT:utils.Toast('地理位置服务连接超时');break;case positionError.PERMISSION_DENIED:utils.Toast('您可能曾拒绝获取我的位置，请在浏览器设置中重新开启！');break;case positionError.POSITION_UNAVAILABLE:utils.Toast('浏览器无法获取您的位置信息');break;default:utils.Toast('定位失败，请确保您的设备已打开定位功能或正常连接到网络');break;}};utils.getGeoLocation=function(succeed,error,options){options=options||{enableHighAccuracy:false,timeout:5000,maximumAge:150000};if(!window.navigator.geolocation||!window.navigator.geolocation.getCurrentPosition){utils.MsgBox('非常抱歉，您的的设备不支持定位或是未开启定位');return false;}
window.navigator.geolocation.getCurrentPosition(succeed,function(e){if(typeof error=='function'&&error.call(this,e)===false)return false;errorFunction.call(this,e);},options);}
utils.getGeocoder=function(lng,lat,callback,error){if(window.AMap){var lnglat=new AMap.LngLat(lng,lat),geo=new AMap.Geocoder();geo.regeocode(lnglat,function(data){if(data.status=="E0"){callback(data);}else{typeof error=='function'&&error();utils.Toast('未能定位到您所在的城市，请确保您的设备已打开定位功能或正常连接到网络');}});}else{typeof error=='function'&&error();utils.Toast('您当前的地理坐标未能定位到您所在的城市，请重试');}};}(window,$,ctripmobi.utils);!function(window,document,$,undefined){var $window=$(window);var typeOf=function(f){return function(obj){return f.call(obj);}}(Object.prototype.toString),T=function(obj){return typeof obj;},isArray=function(a){return typeOf(a)==='[object Array]';},isObject=function(o){return typeOf(o)==='[object Object]';},isFunction=function(f){return typeOf(f)==='[object Function]';},isString=function(s){return typeOf(s)==='[object String]';},isNumber=function(i){return typeOf(i)==='[object Number]';},cloneObject=function(obj){obj=obj||{};var o={};for(var i in obj){o[i]=obj[i];}
return o;},C=function(tagName,attrs,styles,content){var tag=$('<'+tagName+'>'),i;if(isObject(attrs))for(i in attrs)tag.attr(i,attrs[i]);if(isObject(styles))for(i in styles)tag.css(i,styles[i]);if(content)tag.html(content);return tag;},AindexOf=function(arr,val){if(!isArray(arr))return false;var indexOf=arr.indexOf||function(val){for(var i=0,len=this.length;i<len;i++){if(this[i]==val)return i;}
return-1;};return indexOf.call(arr,val);},GetPos=function(el){var left=0,top=0,p=el;do{left+=p.offsetLeft;top+=p.offsetTop;}while((p=p.offsetParent)&&'offsetTop'in p);return{left:left,top:top};},GetMousePos=function(event){var top=Math.max(document.body.scrollTop,document.documentElement.scrollTop),left=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);return{top:top+event.clientY,left:left+event.clientX};},GetPageSize=function(){var f=arguments.callee;if(!f.body||!f.body.length)f.body=$('body');var w=Math.max(f.body.width(),document.documentElement.scrollWidth,document.documentElement.clientWidth,document.documentElement.offsetWidth,document.body.scrollWidth,document.body.clientWidth),h=Math.max(f.body.height(),document.documentElement.scrollHeight,document.documentElement.clientHeight,document.documentElement.offsetHeight,document.body.scrollHeight,document.body.clientHeight);return{width:w,height:h};},GetCenterPos=function(){var html=document.getElementsByTagName('html')[0],body=document.getElementsByTagName('body')[0],top=Math.max(html.scrollTop,body.scrollTop),left=Math.max(html.scrollLeft,body.scrollLeft),width=Math.min(html.clientWidth,body.clientWidth),height=Math.min(html.clientHeight,body.clientHeight);return{top:top+height/2,left:left+width/2};},getPageScrollPos=function(){var left=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),top=Math.max(document.documentElement.scrollTop,document.body.scrollTop),height=Math.min(document.documentElement.clientHeight,document.body.clientHeight)
return{top:top,left:left,height:height};},GetKey=function(o){var keys=[];for(var i in o)keys.push(i);return keys;},CreateId=function(){var r=parseInt(Math.random()*1000);return function(){r++;return ui.PRDFIX+'cid'+parseInt(Math.random()*1000000)+''+r;}}(),GetZIndex=function(){var now=parseInt(Math.random()*1000)+6000;return function(){now++;return now;}}(),Bind=function(fun,obj){return function(){fun.call(obj);};},OneRun=function(fun,flag){if(typeof fun!='function')return;if(OneRun[flag]!=fun.toString()){fun();OneRun[flag]=fun.toString();}},Call=function(fun,obj,args){var result;typeof fun=='function'&&(result=fun.apply(obj||null,args||[]));return result;},isNotAnimate=function(){var reg=/huawei/i;if(reg.test(navigator.userAgent)){return false;}
return true;};var ui=window.Oui={};ui.Tools={C:C,isArray:isArray,isObject:isObject,isFunction:isFunction,isString:isString,isNumber:isNumber,AindexOf:AindexOf,GetPos:GetPos,GetMousePos:GetMousePos,GetPageSize:GetPageSize,GetCenterPos:GetCenterPos,GetKey:GetKey,CreateId:CreateId,Bind:Bind,GetZIndex:GetZIndex,cloneObject:cloneObject,isNotAnimate:isNotAnimate,getPageScrollPos:getPageScrollPos};ui.LockWindow=function(){$('html').css({'overflow':'hidden'})};ui.UnLockWindow=function(){$('html').css({'overflow':'visible'})};ui.PRDFIX='cui-';ui.Mask=function(){var _Mask=$('.'+ui.PRDFIX+'Mask'),win=$(window),body=$('body');if(!_Mask.length){_Mask=C('div',{'class':ui.PRDFIX+'Mask'});_Mask.hide();}
_Mask.css({'position':'absolute','left':'0px','top':'0px','display':'none','width':'0px','height':'0px','z-index':'88','overflow':'hidden'});var resource;var SizeChange=function(){_Mask.css({'width':'auto','height':'auto'});var ps=GetPageSize();var w=ps.width,h=ps.height;body.length&&_Mask.css({'width':w+'px','height':h+'px'});};var Mask={};Mask.SetStyle=function(style){if(isObject(style))for(var i in style){_Mask.css(i,style[i]);}};Mask.GetStyle=function(propertyName){return _Mask.css(propertyName);};Mask.Show=function(){body=body.length?body:$('body');SizeChange();win.bind('resize',SizeChange);body.append(_Mask);_Mask.show();setTimeout(function(){_Mask.addClass(ui.PRDFIX+'Mask-Show');},1);};Mask.Hide=function(){_Mask.removeClass(ui.PRDFIX+'Mask-Show');_Mask.hide();clearInterval(resource);win.unbind('resize',SizeChange);};return Mask;}();ui.Alert=function(options){if(!this instanceof arguments.callee)return new arguments.callee(options);this.Buttons;this.Title='';this.Content='';this.Class=[ui.PRDFIX+'alert'];this.isMask=false;this._id=CreateId();this._Mask=ui.Mask;this._BoxDom;this._ConBoxDom;this._TitleDom;this._ButtonsBoxDom;this._ButtonsDom={};this._ContentDom;this._CloseDom;this._TranBgDom;this._AutoPosHandler;this._body=$('body');this.WatchHash=new ui.WatchHash(this._id,Bind(this.Close,this));this._setOption(options);this._init();};ui.Alert.prototype={_setOption:function(options){if(isObject(options))for(var i in options){switch(i){case'Buttons':case'Title':case'Content':case'isMask':this[i]=options[i];break;case'Class':isArray(options[i])&&(this.Class=this.Class.concat(options[i]));isString(options[i])&&(this.Class.push(options[i]));break;}}},_init:function(){this._createDom();this._BindEvent();},_createDom:function(){this._BoxDom=C('div',{'id':this._id,'class':this.Class.join(' ')});this._BoxDom.css({'position':'fixed','left':'50%','top':'50%','z-index':'99','display':'none'});this._TranBgDom=C('div',{'class':ui.PRDFIX+'alert-tbg'});this._TranBgDom.css({'position':'absolute','left':'0px','top':'0px','width':'100%','height':'100%'});this._BoxDom.append(this._TranBgDom);this._ConBoxDom=C('div',{'class':ui.PRDFIX+'alert-conbox'});this._CloseDom=C('a',{'class':ui.PRDFIX+'close'},null,'×');this._CloseDom.css({'position':'absolute','z-index':'100'});this._BoxDom.append(this._CloseDom);if($.trim(this.Title)){this._TitleDom=C('h3',{'class':ui.PRDFIX+'alert-title'});this._TitleDom.html(this.Title);this._ConBoxDom.append(this._TitleDom);}
this._ContentDom=C('div',{'class':ui.PRDFIX+'alert-content'});if(isString(this.Content)){this._ContentDom.html(this.Content);}else{this._ContentDom.empty();this._ContentDom.append($(this.Content));}
this._ConBoxDom.append(this._ContentDom);this._ButtonsBoxDom=C('div',{'class':ui.PRDFIX+'alert-button-box'});var i,button,self=this;if(isObject(this.Buttons)){for(i in this.Buttons){button=this._ButtonsDom[i]=C('input',{'type':'button','value':i,'class':ui.PRDFIX+'alert-button'});this._ButtonsBoxDom.append(button);}}else if(isArray(this.Buttons)){for(i=0,len=this.Buttons.length;i<len;i++){button=this._ButtonsDom[this.Buttons[i].value]=C('input',{'type':'button','value':this.Buttons[i].value,'class':[ui.PRDFIX+'alert-button',this.Buttons[i]['class']].join(' ')});this._ButtonsBoxDom.append(button);}}
this._ConBoxDom.append(this._ButtonsBoxDom);this._BoxDom.append(this._ConBoxDom);this._body.append(this._BoxDom);},_Location:function(){var self=this;var _AutoPosHandler=this._AutoPosHandler=function(){var w=self._BoxDom.width(),h=self._BoxDom.height(),left=-(w/2),top=-(h/2);self._BoxDom.css({'top':'49%','margin-left':left+'px','margin-top':top+'px'});};_AutoPosHandler();$(window).bind('resize',_AutoPosHandler);},_UnLocation:function(){$(window).unbind('resize',this._AutoPosHandler);},_BindEvent:function(){var button,event,self=this,i;if(isArray(this.Buttons)){for(i=0,len=this.Buttons.length;i<len;i++){if(this.Buttons[i]&&this.Buttons[i].value&&this._ButtonsDom[this.Buttons[i].value]&&this.Buttons[i].event){button=this.Buttons[i];event=button.event;for(var t in event){this._ButtonsDom[button.value].bind(t,function(handler){return function(e){isFunction(handler)&&handler.call(self,e);};}(event[t]));}}}}else if(isObject(this.Buttons)){for(i in this.Buttons){button=this._ButtonsDom[i];if(button){button.bind('click',function(handler){return function(e){isFunction(handler)&&handler.call(self,e);};}(this.Buttons[i]));this._ButtonsBoxDom.append(button);}}}
this._CloseDom.bind('click',function(){self.Close();});},Close:function(){this._BoxDom.hide();this._BoxDom.remove();this._Mask.Hide();this._Mask.SetStyle({opacity:0});this._UnLocation();this.WatchHash.End();},Open:function(){this._Mask.SetStyle({opacity:0.3});this._Mask.Show();this._BoxDom.css('z-index',GetZIndex());this._BoxDom.show();this._Location();this.WatchHash.Start();}};ui.Layer=function(options){if(!this instanceof arguments.callee)return new arguments.callee(options);this.Content='';this.Time;this.CallBack;this.Class=[ui.PRDFIX+'layer'];this.Event;this._Id=CreateId();this._Mask=ui.Mask;this._BoxDom;this._ContentDom;this.autolocation;this._body=$('body');this._setOption(options);this._init();};ui.Layer.prototype={_setOption:function(options){if(isObject(options))for(var i in options){switch(i){case'Content':case'Time':case'CallBack':case'Event':this[i]=options[i];break;case'Class':isArray(options[i])&&(this.Class=this.Class.concat(options[i]));isString(options[i])&&this.Class.push(options[i]);break;}}},_init:function(){this._createDom();this._BuildEvent();},_createDom:function(){this._BoxDom=C('div',{'class':this.Class.join(' ')});this._BoxDom.css({'position':'fixed','left':'50%','top':'50%','z-index':'99999','display:':'none'});this._ContentDom=C('div',{'class':ui.PRDFIX+'layer-content'});if(isString(this.Content)){this._ContentDom.html(this.Content);}else{this._ContentDom.append($(this.Content));}
this._BoxDom.append(this._ContentDom);},_BuildEvent:function(){var self=this;if(isObject(this.Event))for(var i in this.Event){this._BoxDom.bind(i,(function(handler){return function(e){handler.call(self,e);};})(this.Event[i]));}},_Location:function(){var pos=GetCenterPos(),width=this._BoxDom.width(),height=this._BoxDom.height();this._BoxDom.css({'margin-left':-(width/2)+'px','margin-top':-(height/2)+'px'});},_UnAutoLocation:function(){$(window).unbind('resize',this.autolocation);$(window).unbind('scroll',this.autolocation);},_AutoLocation:function(){var self=this;this.autolocation=function(){self._Location();}
$(window).bind('resize',this.autolocation);$(window).bind('scroll',this.autolocation);},Close:function(){this._BoxDom.hide();this._Mask.Hide();this._UnAutoLocation();},Open:function(notMask){if(!$('#'+this._Id).length){$('body').append(this._BoxDom);}!notMask&&this._Mask.Show();this._BoxDom.css('z-index',GetZIndex());this._BoxDom.show();this._Location();var self=this;if(this.Time){setTimeout(function(){self.Close();isFunction(self.CallBack)&&self.CallBack();},this.Time*1000);}
this._AutoLocation();}};ui.ViewPage=function(options){this.Element;this.onBeforeCreate;this.onCreate;this.onShow;this.onHide;this.Class=[ui.PRDFIX+'view-page'];this._id=CreateId();this._BoxDom;this._ContDom;this.Doc;this._BodyDom;this._AutoLocResoure;this.$window=$(window);this._callback_Location;this._WhichHash=new ui.WatchHash(this._id,Bind(function(){this.Close();},this));this._setOption(options);this._init();};ui.ViewPage.prototype={_setOption:function(options){if(isObject(options))for(var i in options){switch(i){case'Element':case'onBeforeCreate':case'onCreate':case'onShow':case'onHide':this[i]=options[i];break;case'Class':isArray(options[i])&&(this.Class=this.Class.concat(options[i]));isString(options[i])&&this.Class.push(options[i]);break;}}},_init:function(){isFunction(this.onBeforeCreate)&&this.onBeforeCreate();this._ContDom&&this._ContDom.remove();this._BoxDom&&this._BoxDom.remove();this._CreateDom();this._BuildEvent();isFunction(this.onCreate)&&this.onCreate();},_CreateDom:function(){this._BodyDom=$('body');this.Element=$(this.Element);this._BoxDom=C('div',{'id':this._id,'class':this.Class.join(' ')});this._BoxDom.css({'position':'absolute','left':'0px','top':'0px','width':'100%','display':'none'});this._ContDom=C('div',{'class':ui.PRDFIX+'view-page-content'});this._BoxDom.append(this._ContDom);this._ContDom.append(this.Element);this.Doc=this._ContDom;this._BodyDom.append(this._BoxDom);},_Location:function(){this._BoxDom.css({'width':'auto','height':'auto'});var wh=GetPageSize();this._BoxDom.css({'width':wh.width+'px','height':wh.height+'px'});},_AutoLocation:function(){this._Location();var self=this;this._callback_Location=function(){self._Location();};this.$window.bind('resize',this._callback_Location);},_UnAutoLocation:function(){this.$window.unbind('resize',this._callback_Location);},_BuildEvent:function(){},Open:function(){this._BoxDom.css('z-index',GetZIndex());this._BoxDom.show();isFunction(this.onShow)&&this.onShow();this._WhichHash.Start();this._AutoLocation();},Close:function(){this._BoxDom.hide();isFunction(this.onHide)&&this.onHide();this._WhichHash.End();this._UnAutoLocation();},CloseNotCallBack:function(){this._BoxDom.hide();this._WhichHash.End();this._UnAutoLocation();},getRoot:function(){return this._ContDom;}};ui.form={};ui.form.Select=function(options){if(!this instanceof arguments.callee)return new arguments.callee(options);this.Select;this.Class=[ui.PRDFIX+'form-select'];this.OnChange=[];this.Direction='bottom';this.UseEmptyOption;this.Title;this.isShowValue;this.isNotShowInputTitle;this.DefaultValue;this.FormatOptionTitle;this.isShowBodyfirstChind;this.Type=ui.form.Select.TYPE.NORMAL;this.FloatBoxOffset;this.OnShow=function(){};this.OnHide=function(){};this.EmptyOptionTitle='无';this._Id=CreateId();this._OSelect;this._OGroups;this._OOptions;this._SelectInputDom;this._SelectFloatBoxDom;this._SelectContentDom;this._OptGroupDom;this._OptionsDoms;this._OptionsMap;this._OptionsDomMap;this._SelectHeader;this._TitleDom;this._CloseButtonDom;this._Mask=ui.Mask;this._CurrentOptions;this._multiple;this._desabled;this.__WindowReSizeHander;this._isfocus=false;this._lastkey=[];this._hasError=false;this._beforePosition={};this.WatchHash=new ui.WatchHash(this._Id,Bind(this._Close,this));this._CssSelectOption='option[value]';this._setOption(options);this._init();};ui.form.Select.TYPE={NORMAL:1,SELECTDOWN:2};ui.form.Select.prototype={_setOption:function(options){if(isObject(options))for(var i in options){switch(i){case'Select':case'Direction':case'UseEmptyOption':case'Title':case'isShowValue':case'isNotShowInputTitle':case'DefaultValue':case'FormatOptionTitle':case'isShowBodyfirstChind':case'Type':case'FloatBoxOffset':case'OnShow':case'OnHide':case'EmptyOptionTitle':this[i]=options[i];break;case'OnChange':typeof options[i]=='function'&&this.OnChange.push(options[i]);break;case'Class':isArray(options[i])&&(this.Class=this.Class.concat(options[i]));isString(options[i])&&this.Class.push(options[i]);break;}}},_init:function(){if(this._SelectInputDom)this._SelectInputDom.remove();if(this._SelectFloatBoxDom)this._SelectFloatBoxDom.remove();if(this._SelectContentDom)this._SelectContentDom.remove();this._OptGroupDom=[];this._OptionsDoms=[];this._OptionsMap={};this._OptionsDomMap={};this._CloseButtonDom;this._CurrentOptions={};this._multiple=false;this._desabled=false;if(this.UseEmptyOption)this._CssSelectOption='option';this._createDom();this._afterDispose();this._BuildEvent();},_afterDispose:function(){switch(this.Type){case ui.form.Select.TYPE.NORMAL:break;case ui.form.Select.TYPE.SELECTDOWN:this._SelectHeader.hide();break;}},_location:function(){switch(this.Type){case ui.form.Select.TYPE.NORMAL:this._location_normal();break;case ui.form.Select.TYPE.SELECTDOWN:this._location_select();break;}},_location_normal:function(){},_location_select:function(){var _w=0,_h=0,_bh=0;if(window.jQuery){_w=this._SelectInputDom.outerWidth(),_h=this._SelectInputDom.outerHeight(),_bh=$('body').innerHeight();}else{_w=this._SelectInputDom.width();_h=this._SelectInputDom.height();_bh=$('body').height();}
var pos=GetPos(this._SelectInputDom[0]),w=_w,h=_h,sw=this._SelectFloatBoxDom.width(),sh=this._SelectFloatBoxDom.height(),left=0,top=0,height='auto',docheight=Math.max(_bh,document.documentElement.clientHeight);if(isFunction(this.FloatBoxOffset)){var offset=this.FloatBoxOffset(pos);if(offset){pos.top+=offset.top?offset.top:0;pos.left+=offset.left?offset.left:0;w+=offset.width?offset.width:0;h+=offset.height?offset.height:0;}}
if(this.Direction=='top'){left=pos.left;top=pos.top-sh;if(sh>=pos.top){height=pos.top+'px';top=0;}}else{left=pos.left;top=pos.top+h;if(docheight-top<=sh){height=(docheight-top)+'px';top=pos.top+h;}}
this._SelectFloatBoxDom.css({left:left,top:top,width:w+'px'});},_OnChange:function(val){for(var i=0,I=this.OnChange.length;i<I;i++){typeof this.OnChange[i]=='function'&&this.OnChange[i].call(this,val);}},_AutoLoaction:function(){var self=this;if(!this._AutoLoactionRun){this.__WindowReSizeHander=function(){self._location();};$window.bind('resize',this.__WindowReSizeHander);this._AutoLoactionRun=true;}},_UnAutoLoaction:function(){$window.unbind('resize',this.__WindowReSizeHander);this._AutoLoactionRun=false;},_getOhtml:function(o){o=o||[];var arr=[],i;if(isObject(o)){for(i in o){arr.push($(o[i]).html());}}else if(isArray(o)){for(var i=0,len=o.length;i<len;i++){arr.push($(o[i]).html());}}
return arr.join(',');},_getCurrentSelected:function(ops){var val=[];ops.each(function(){if(this.selected)val.push(this);});!this._multiple&&val.length&&(val=[val.pop()]);return val;},_getSelectedTitle:function(ops){return select_value;},_createDom:function(){var self=this;this._OSelect=$(this.Select);this._OSelect=$(this._OSelect[0]);if(!this._OSelect.length)throw Error("Select框不存在!");this._multiple=!!this._OSelect[0].multiple;this._desabled=!!this._OSelect[0].disabled;this._OGroups=this._OSelect.find('optgroup');this._OOptions=this._OSelect.find(this._CssSelectOption);if(this.DefaultValue&&this._OOptions.filter('[value="'+this.DefaultValue+'"]').length){this._OOptions.removeAttr('selected');this._OOptions.filter('[value="'+this.DefaultValue+'"]').attr('selected','selected');}
this._SelectInputDom=C('span',{'class':this.Class.join(' '),'tabindex':'1'});var selected=this._getCurrentSelected(this._OOptions);var select_value=this._getOhtml(selected);if(this._OOptions.length){this._SelectInputDom.html(select_value);}else{this._SelectInputDom.html(this.EmptyOptionTitle);}
this._SelectInputDom.html(select_value);if(this.isNotShowInputTitle)this._SelectInputDom.hide();this._SelectFloatBoxDom=C('div',{'class':ui.PRDFIX+'select-float-box','tabindex':'1'});for(var ci=0,cI=this.Class.length;ci<cI;ci++)this._SelectFloatBoxDom.addClass(this.Class[ci]+'-float');this._SelectFloatBoxDom.css({'position':'absolute','width':'100%','overflow':'hidden','left':'0px','top':'0px','z-index':'199'});this._SelectContentDom=C('div',{'class':ui.PRDFIX+'select-cont-box'});if(this._OGroups.length){this._OGroups.each(function(){var $this=$(this),optclass=[ui.PRDFIX+'select-optgroup-box'];if($.trim(this.className).length){optclass.push(this.className);}
var optgroup=C('div',{'class':optclass.join(' ')});var subOption=$this.find(self._CssSelectOption);subOption.each(function(){var optclass=[ui.PRDFIX+'select-option'],$this=$(this);if($.trim(this.className).length)optclass.push(this.className);var option=C('div',{'class':optclass.join(' '),'tabindex':'2'});var ophtml=$this.html();if(typeof self.FormatOptionTitle=='function')ophtml=self.FormatOptionTitle(ophtml,this);option.html(ophtml);var value=$this.attr('value');option.attr('data-value',value);var cid=CreateId();self._OptionsMap[cid]=this;self._OptionsDomMap[cid]=option;option.attr('id',cid);$this.attr('data-id',cid);self._OptionsDoms.push(option);if(this.selected)$.each(selected,function(){if(value==$(this).attr('value')){$(this).attr('selected','selected');self._CurrentOptions[$(this).attr('data-id')]=this;option.addClass(ui.PRDFIX+'option-current');}});optgroup.append(option);});self._OptGroupDom.push(optgroup);});this._SelectContentDom.append(self._OptGroupDom);}else{this._OOptions.each(function(){var optclass=[ui.PRDFIX+'select-option'],$this=$(this);if($.trim(this.className).length)optclass.push(this.className);var option=C('div',{'class':optclass.join(' '),'tabindex':'2'});var ophtml=$this.html();if(typeof self.FormatOptionTitle=='function')ophtml=self.FormatOptionTitle(ophtml,this);option.html(ophtml);var value=$this.attr('value');option.attr('data-value',value);var cid=CreateId();self._OptionsMap[cid]=this;self._OptionsDomMap[cid]=option;option.attr('id',cid);$this.attr('data-id',cid);if(this.selected)$.each(selected,function(){if(value==$(this).attr('value')&&this.selected){$(this).attr('selected','selected');self._CurrentOptions[$(this).attr('data-id')]=this;option.addClass(ui.PRDFIX+'option-current');}});self._OptionsDoms.push(option);self._SelectContentDom.append(option);});}
this._SelectHeader=C('div',{'class':ui.PRDFIX+'select-head'});this._CloseButtonDom=C('div',{'class':ui.PRDFIX+'select-close'});this._CloseButtonDom.html('关闭');this._TitleDom=C('div',{'class':ui.PRDFIX+'select-title'});if(this.Title)this._TitleDom.html(this.Title);this._SelectHeader.append(this._CloseButtonDom);this._SelectHeader.append(this._TitleDom);this._SelectFloatBoxDom.append(this._SelectHeader);this._SelectFloatBoxDom.append(this._SelectContentDom);$('body').append(this._SelectFloatBoxDom);this._OSelect.after(this._SelectInputDom);this._OSelect.hide();this._location();},_Toggle:function(){if(this._SelectFloatBoxDom.css('display')=='none'){this._Open();this._AutoLoaction();}else{this._Close();this._UnAutoLoaction();}},_BuildEvent:function(){if(this._OOptions.length){switch(this.Type){case ui.form.Select.TYPE.NORMAL:this._BuildEvent_normal();break;case ui.form.Select.TYPE.SELECTDOWN:this._BuildEvent_selectdown();break;}}},_BuildEvent_selectdown:function(){var self=this,isOut=true;this._SelectInputDom.bind({'click':function(){self._location();self._Toggle();},'focus':function(){isOut=false;},'blur':function(){isOut=true;setTimeout(function(){if(isOut)self.Close();},200);}});$(this._OptionsDoms).each(function(){$(this).bind({'mouseover':function(e){self._OOptions.removeClass(ui.PRDFIX+'option-over');var $this=$(this);$this.addClass(ui.PRDFIX+'option-over');},'click':function(e){var $this=$(this);var val=$this.attr('data-value');var option=self._OptionsMap[this.id];self._lastkey=GetKey(self._CurrentOptions);self._SetValue(option,$this);if(!self._multiple){self._Toggle();}
self._isChange(val);},'focus':function(){isOut=false;},'blur':function(){isOut=true;setTimeout(function(){if(isOut)self.Close();},200);}});});this._CloseButtonDom.bind('click',function(){self._Close();});this._OSelect.bind('change',function(){self._OnChange(self.GetValue().shift());});},_BuildEvent_normal:function(){var self=this;this._SelectInputDom.bind('click',function(){self._location();self._Toggle();});$(this._OptionsDoms).each(function(){$(this).bind({'mouseover':function(e){self._OOptions.removeClass(ui.PRDFIX+'option-over');var $this=$(this);$this.addClass(ui.PRDFIX+'option-over');},'click':function(e){var $this=$(this);var val=$this.attr('data-value');var option=self._OptionsMap[this.id];self._lastkey=GetKey(self._CurrentOptions);self._SetValue(option,$this);if(!self._multiple){self._Toggle();}
self._isChange(val);}});});this._CloseButtonDom.bind('click',function(){self._Close();});this._OSelect.bind('change',function(){self._OnChange(self.GetValue().shift());});},_isChange:function(val){var nowkey=GetKey(this._CurrentOptions),i;for(i=0,len=nowkey.length;i<len;i++){if(AindexOf(this._lastkey,nowkey[i])<0){this._OnChange(val);return;}}
for(i=0,len=this._lastkey.length;i<len;i++){if(AindexOf(nowkey,this._lastkey[i])<0){this._OnChange(val);return;}}},_SetValue:function(val,dom){if(this._hasError)return;dom=dom||this._OptionsDomMap[$(val).attr('data-id')];var self=this;if(!this._multiple){this._CurrentOptions={};this._OOptions.removeAttr('selected');$.each(this._OptionsDoms,function(){$(this).removeClass(ui.PRDFIX+'option-current');});dom.addClass(ui.PRDFIX+'option-current');this._CurrentOptions[$(val).attr('data-id')]=val;$(val).attr('selected','selected');}else{var cid=$(val).attr('data-id');if(dom&&dom.attr('data-value')){if(this._CurrentOptions[cid]){dom.removeClass(ui.PRDFIX+'option-current');this._UnSetValue(val);}else{dom.addClass(ui.PRDFIX+'option-current');this._CurrentOptions[$(val).attr('data-id')]=val;$(val).attr('selected','selected');}}else{$.each(this._OOptions,function(){self._UnSetValue(this);});}}
this._SelectInputDom.html(this.isShowValue?this.GetValue().join('，'):this.GetTitle().join('，'));},_Open:function(){typeof this.OnShow=='function'&&this.OnShow();switch(this.Type){case ui.form.Select.TYPE.NORMAL:this._Open_normal();break;case ui.form.Select.TYPE.SELECTDOWN:this._Open_select();break;}
this._SelectInputDom.addClass(ui.PRDFIX+'select-open');},_Open_normal:function(){var self=this;this._beforePosition.top=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._beforePosition.left=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);if(!this.isShowBodyfirstChind){if(!this._masterPage){this._masterPage=$('body').find('div').first();}
this._masterPage.hide();}
window.scrollTo(0,1);var $win=$(window);this._SelectFloatBoxDom.css({'top':$win.height()+'px'});this._SelectFloatBoxDom.show();this._SelectFloatBoxDom[isNotAnimate()?'animate':'css']({'top':'0px'});this._Mask.SetStyle({'background':'#fff'});this._SelectFloatBoxDom.css('z-index',GetZIndex());this.WatchHash.Start();},_Open_select:function(){this._SelectFloatBoxDom.show();},_Close:function(){typeof this.OnHide=='function'&&this.OnHide();switch(this.Type){case ui.form.Select.TYPE.NORMAL:this._Close_normal();break;case ui.form.Select.TYPE.SELECTDOWN:this._Close_select();break;}
this._SelectInputDom.removeClass(ui.PRDFIX+'select-open');},_Close_normal:function(){if(!this.isShowBodyfirstChind){if(!this._masterPage){this._masterPage=$('body').find('div:first');}
this._masterPage.show();}
this._Mask.SetStyle({'background':''});this._SelectFloatBoxDom.hide();if(this._beforePosition.top){setTimeout(Bind(function(){window.scrollTo(this._beforePosition.left,this._beforePosition.top)},this),120);}
this.WatchHash.End();},_Close_select:function(){this._SelectFloatBoxDom.hide();},_UnSetValue:function(val){if(this._hasError)return;delete this._CurrentOptions[$(val).attr('data-id')];$(val).removeAttr('selected');},WatchChange:function(){if(this._hasError)return;this._OOptions=this._OSelect.find(this._CssSelectOption);var self=this,isExistNew=false;this._OOptions.each(function(){var $this=$(this);if(self._OptionsDomMap[$this.attr('data-id')]){self._OptionsDomMap[$this.attr('data-id')].html($this.html());self._OptionsDomMap[$this.attr('data-id')].attr('data-value',$this.attr('value'));if(this.selected){self._SetValue(this);}}else{isExistNew=true;}});if(isExistNew)this.ReLoad();},ReLoad:function(){if(this._hasError)return;this._init();},SetValue:function(value){var option=this._OOptions.filter('[value="'+value+'"]'),self=this;this.DefaultValue=value;option.each(function(){self._SetValue(this);});},GetValue:function(){if(this._hasError)return;var o=[];var currents=[],self=this;this._OOptions.each(function(n){if(self._CurrentOptions[$(this).attr('data-id')])currents.push(this);});$.each(currents,function(i){o.push($(this).attr('value'));});return o;},GetTitle:function(){if(this._hasError)return;var o=[];var currents=[],self=this;this._OOptions.each(function(n){if(self._CurrentOptions[$(this).attr('data-id')])currents.push(this);});$.each(currents,function(i){o.push($(this).text());});return o;},Clear:function(){this._OOptions.removeAttr('selected');this._CurrentOptions={};var select_value=this._getSelectedTitle(this._OOptions);this._SelectInputDom.html(select_value);$.each(this._OptionsDoms,function(){this.removeClass(ui.PRDFIX+'option-current');});},CurrentIndexOf:function(val){for(var i in this._CurrentOptions){if($(this._CurrentOptions[i]).attr('value')==val)return true;}
return false;},SetTitle:function(title){this._SelectInputDom.html(title);},TriggerChange:function(){this._OnChange(this.GetValue().shift());},Open:function(){this._Open();this._AutoLoaction();},Close:function(){this._Close();this._UnAutoLoaction();},addOnChange:function(fun){typeof fun=='function'&&this.OnChange.push(fun);}};ui.Mobile={};ui.Mobile.DIR_TOP=1;ui.Mobile.DIR_RIGHT=2;ui.Mobile.DIR_BOTTOM=3;ui.Mobile.DIR_LEFT=4;ui.Mobile.DIR_CENTER=5;ui.Mobile.addEventGesture=function(node,handler,starthand){node=$(node);var left=0,top=0;if(node.length){node[0].addEventListener('touchstart',function(e){e.preventDefault();var touche=e.targetTouches[0];left=touche.clientX;top=touche.clientY;typeof starthand=='function'&&starthand();},false);var touchendhand=function(e){e.preventDefault();var touche=e.changedTouches[0],eleft=touche.clientX-left,etop=touche.clientY-top,pos;if(Math.abs(eleft)<40&&Math.abs(etop)<40)return;pos={XDirection:eleft<0?ui.Mobile.DIR_LEFT:ui.Mobile.DIR_RIGHT,XOffset:Math.abs(eleft),YDirection:etop<0?ui.Mobile.DIR_TOP:ui.Mobile.DIR_BOTTOM,YOffset:Math.abs(etop)};if(isFunction(handler)){handler.apply(this,[pos,e]);}};node[0].addEventListener('touchend',touchendhand,false);node[0].addEventListener('touchcancel',touchendhand,false);}};ui.WatchHash=function(hash,onLost){hash=hash.replace(/[\s\-]/mg,'');if(!this instanceof arguments.callee)return new arguments.callee(hash,onLost);var reghash=new RegExp('\\b'+hash+'\\b'),phash=window.location.hash,isReturn=false,isQQ=/qq/i.test(navigator.userAgent);var handler=function(){if(!window.location.hash.match(reghash)){isReturn=true;window.removeEventListener('hashchange',handler);typeof onLost=='function'&&onLost();}};this.Start=function(){phash=window.location.hash;var hashs=[];if(window.location.hash.length)hashs.push(location.hash);hashs.push(hash);if(!isQQ){window.location.assign((window.location.hash.indexOf('#')==-1?"#"+hashs.join('/'):hashs.join('/')));window.addEventListener('hashchange',handler);isReturn=false;}};this.End=function(){if(isReturn)return;if(!isQQ){window.removeEventListener('hashchange',handler);window.history.go(-1);}};};}(this,document,$);void function(ui,$){var Loading=new ui.Layer({Content:$('<div class="cui-loading"></div>'),Class:'cui-loadingbox'});ui.Loading=Loading;var TextLoading=function(text,flag){var curfun=arguments.callee,Loading;if(!curfun[flag]){Loading=new ui.Layer({Content:$('<div class="loading-ui"><div class="cui-breaking-load"><div class="cui-w-loading"></div><i class="cui-white-logo"></i><div class="cui-loading-title">'+text+'</div></div></div>'),Class:'text-loading'});}else{Loading=curfun[flag];}
return Loading;};ui.TextLoading=TextLoading;ui.AlertLoading=TextLoading('正在定位中...','AlertLoading');}(Oui,$);(function(window,$,utils){var sales=utils.getUrlParam('sales'),sourceid=utils.getUrlParam('sourceid');var sticket=utils.getUrlParam('sticket',true);var areacode=utils.getUrlParam('areacode',true);if(typeof(sticket)=='string'&&typeof(areacode)=='string'){sales='ydwxcs';sourceid='1622';}
var allianceID=utils.getUrlParam('AllianceID'),sid=utils.getUrlParam('SID'),OUID=utils.getUrlParam('OUID');var showad=utils.getUrlParam('showad'),appad=null;if(showad&&+showad>0&&(+showad&1)==1){appad=1;}
var _d=null;if(allianceID&&sid){var UNION={data:{AllianceID:allianceID,SID:sid,OUID:OUID},timeout:new Date().addDays(7),timeby:7};var isSpecAllianceid=0;var lstSpecAllianceid=['5942','1127','7225','3588'];for(var i=0,len=lstSpecAllianceid.length;i<len;i++){if(lstSpecAllianceid[i]==allianceID){isSpecAllianceid=1;var prevAllianceid=utils.getStorage('UNION')&&utils.getStorage('UNION').data&&utils.getStorage('UNION').data.AllianceID;if(allianceID!==prevAllianceid){utils.removeStorage('APP_DOWNLOAD',true);}
break;}}
if(!isSpecAllianceid){_d={value:{isExpire:1,isClose:1},timeout:new Date().addDays(1),timeby:1};}
if(appad&&+appad==1){_d=null;UNION.data.appad=appad;}
utils.setStorage('UNION',JSON.stringify(UNION));utils.Cookie.Del('Union');}else{var refUrl=document.referrer;if(refUrl){refUrl=refUrl.replace('http://','').replace('https://','').split('/')[0].toLowerCase();if(refUrl.indexOf('www.ctrip.com')>-1||refUrl.indexOf('hotels.ctrip.com')>-1||refUrl.indexOf('flights.ctrip.com')>-1||refUrl.indexOf('trains.ctrip.com')>-1||refUrl.indexOf('vacations.ctrip.com')>-1||refUrl.indexOf('tuan.ctrip.com')>-1||refUrl.indexOf('lipin.ctrip.com')>-1||refUrl.indexOf('huixuan.ctrip.com')>-1||refUrl.indexOf('package.ctrip.com')>-1){var cookieUnion=utils.Cookie.Get('UNION');if(!cookieUnion){cookieUnion=utils.Cookie.Get('Union');}
if(cookieUnion){utils.removeStorage('UNION',true);_d={value:{isExpire:1,isClose:1},timeout:new Date().addDays(1),timeby:1};}}}}
utils.union={GetUnion:function(){var UNION=utils.getStorage('UNION');if(UNION&&UNION.data){return UNION.data;}
return null;}};if((sourceid&&+sourceid>0)||(sales&&sales.length>0)){}
if(_d){utils.setStorage('APP_DOWNLOAD',JSON.stringify(_d));}
if(!sales&&!sourceid){var refUrl=document.referrer;if(refUrl){refUrl=refUrl.replace('http://','').replace('https://','').split('/')[0].toLowerCase();if(refUrl.indexOf('baidu')>-1){sales='SEO_BAIDU';allianceID=allianceID||'4897';sid=sid||'353693';OUID=OUID||'';}
if(refUrl.indexOf('google')>-1){sales='SEO_GOOGLE';allianceID=allianceID||'4899';sid=sid||'353694';OUID=OUID||'';}
if(refUrl.indexOf('soso.com')>-1){sales='SEO_SOSO';allianceID=allianceID||'4900';sid=sid||'353696';OUID=OUID||'';}
if(refUrl.indexOf('sogou')>-1){sales='SEO_SOGOU';allianceID=allianceID||'4901';sid=sid||'353698';OUID=OUID||'';}
if(refUrl.indexOf('so.com')>-1){sales='SEO_SO';allianceID=allianceID||'5376';sid=sid||'353699';OUID=OUID||'';}
if(refUrl.indexOf('so.360')>-1){sales='SEO_360SO';allianceID=allianceID||'5376';sid=sid||'353700';OUID=OUID||'';}
if(refUrl.indexOf('bing.com')>-1){sales='SEO_BING';allianceID=allianceID||'4902';sid=sid||'353701';OUID=OUID||'';}
if(refUrl.indexOf('yahoo')>-1){sales='SEO_YAHOO';allianceID=allianceID||'4903';sid=sid||'353703';OUID=OUID||'';}
if(refUrl.indexOf('youdao')>-1){sales='SEO_YOUDAO';allianceID=allianceID||'4904';sid=sid||'353704';OUID=OUID||'';}
if(refUrl.indexOf('jike.com')>-1||refUrl.indexOf('babylon.com')>-1||refUrl.indexOf('ask.com')>-1||refUrl.indexOf('avg.com')>-1||refUrl.indexOf('easou.com')>-1||refUrl.indexOf('panguso.com')>-1||refUrl.indexOf('yandex.com')>-1){sales='SEO_360SO';allianceID=allianceID||'5376';sid=sid||'353700';OUID=OUID||'';}
if(refUrl.indexOf('sm.cn')>-1){sales='SEO_YOUDAO';allianceID=allianceID||'18887';sid=sid||'447459';OUID=OUID||'';}
if(allianceID&&sid){var UNION={data:{AllianceID:allianceID,SID:sid,OUID:OUID},timeout:new Date().addDays(7),timeby:7};utils.setStorage('UNION',JSON.stringify(UNION));utils.Cookie.Del('Union');_d={value:{isExpire:1,isClose:1},timeout:new Date().addDays(1),timeby:1};if(_d){utils.setStorage('APP_DOWNLOAD',JSON.stringify(_d));}}}}
var SALES=null;if(sales||sourceid){SALES={timeout:new Date().addDays(1,true),timeby:true,data:{}};utils.Cookie.Del('Session');if(sales.toLowerCase()!='ydwxcs'&&sourceid!='1622'){utils.removeStorage('YDWXCS',true);utils.removeStorage('SALES',true);utils.removeStorage('SALESOBJ',true);utils.removeStorage('SALES_OBJECT',true);}else{SALES={timeout:new Date().addDays(30,true),timeby:true,data:{}};}
SALES.data.sales=sales;SALES.data.sourceid=sourceid;utils.setStorage('SALES',JSON.stringify(SALES));}
if(!sales&&!sourceid){var linkCookie=utils.Cookie.Get('Session');if(linkCookie){linkCookie=linkCookie.toLowerCase();var arrCokie=linkCookie.split('&');for(var i=0,len=arrCokie.length;i<len;i++){if(arrCokie[i].indexOf('smartlinkcode')>-1){linkCookie=arrCokie[i];break;}}
linkCookie=linkCookie?linkCookie.replace('smartlinkcode=',''):null;if(linkCookie){$.get(ctripmobi.utils.website+'/ClientData/GetSourceInfo/'+encodeURI(linkCookie),function(data){if(data&&data.ServerCode==1&&data.Data){var dtime=new Date().addDays(30,true);var SALESOBJ={timeout:dtime,timeby:true,data:data.Data};SALES.data.sales=data.Data.sales;SALES.data.sourceid=data.Data.sid;utils.setStorage('SALES',JSON.stringify(SALES));utils.setStorage('SALESOBJ',JSON.stringify(SALESOBJ));var SALES_OBJECT={savedate:dtime,tag:SALES.data.sales,timeout:dtime};SALES_OBJECT.value=data.Data;utils.setStorage('SALES_OBJECT',JSON.stringify(SALES_OBJECT));utils.Cookie.Del('Session');}});}}}
if(sales||sourceid){var parm=sales?sales:sourceid;$.get(ctripmobi.utils.website+'/ClientData/GetSalesInfo/'+parm,function(data){if(data&&data.ServerCode==1&&data.Data){var sTime=new Date().addDays(30,true);var SALES={timeout:sTime,timeby:true,data:{}};var SALESOBJ={timeout:sTime,timeby:true,data:data.Data};SALES.data.sales=data.Data.sales;SALES.data.sourceid=data.Data.sid;if(sales.toLowerCase()=='ydwxcs'||sourceid=='1622'){SALES.timeout=new Date().addDays(1,true);}else{utils.removeStorage('YDWXCS',true);$('#ydwxcsH').empty();$('#ydwxcsF').empty();}
if(!data.Data.appurl||data.Data.appurl.length<=0){$('#dl_app').hide();if($('footer'))$('footer').removeClass('pb85');}else{}
utils.setStorage('SALES',JSON.stringify(SALES));utils.setStorage('SALESOBJ',JSON.stringify(SALESOBJ));var SALES_OBJECT={savedate:sTime,tag:SALES.data.sales,timeout:sTime};SALES_OBJECT.value=data.Data;utils.setStorage('SALES_OBJECT',JSON.stringify(SALES_OBJECT));utils.replaceContent(SALESOBJ);}});}else{var SALESOBJ=utils.getStorage('SALESOBJ');utils.replaceContent(SALESOBJ);}})(window,$,ctripmobi.utils);(function(window,$,utils){var SALES=utils.getStorage('SALES');if(SALES&&SALES.data&&(SALES.data.sales||SALES.data.sourceid)){if((SALES.data.sales&&SALES.data.sales.toLowerCase()=='ydwxcs')||(SALES.data.sourceid&&SALES.data.sourceid=='1622')){$('.exit_a').on('click',function(){utils.removeStorage('YDWXCS',true);utils.removeStorage('USERINFO',true);});$('.jsmodule').hide();$('.jsH').addClass('jsH_ydwxcs');$('.jsM').hide();var wxcity={index:function(){$('.jsmodule').hide();$('#unloginTip').hide();$('.login').hide();$('#righthead').hide();$('footer nav').hide();$('footer p').css('border-top','0px');$("li[data-type='/webapp/myctrip/']").click(function(e){var YDWXCS=utils.getStorage('YDWXCS');if(YDWXCS&&YDWXCS.data&&YDWXCS.data.IsLogin){window.location.href='/webapp/myctrip/';}
else{var buttons=[{'value':'会员登录','class':'ctrip-cancel','event':{'click':function(){this.Close();var backUrl='http://'+window.location.host+'/webapp/myctrip/';window.location.href='http://120.197.232.22:80/sso-core/singlesignon?backurl='+backUrl+'&portaltype=x';}}},{'value':'非会员订单查询','class':'ctrip-confirm cui-alert-button-small','event':{'click':function(){this.Close();window.location.href='/webapp/myctrip/#account/login?from=/webapp/myctrip/';}}}];var a=new Oui.Alert({Buttons:buttons,Title:'提示信息',Content:'请选择查询方式'});a.Open();e.preventDefault();e.stopPropagation();}});},index_custom:function(){var YDWXCS=utils.getStorage('YDWXCS');if(YDWXCS&&YDWXCS.data&&YDWXCS.data.IsLogin){window.location.href='/webapp/myctrip/';}
else{var buttons=[{'value':'会员登录','class':'ctrip-cancel','event':{'click':function(){this.Close();var backUrl='http://'+window.location.host+'/webapp/myctrip/';window.location.href='http://120.197.232.22:80/sso-core/singlesignon?backurl='+backUrl+'&portaltype=x';}}},{'value':'非会员订单查询','class':'ctrip-confirm cui-alert-button-small','event':{'click':function(){this.Close();window.location.href='/webapp/myctrip/#account/login?from=/webapp/myctrip/';}}}];var a=new Oui.Alert({Buttons:buttons,Title:'提示信息',Content:'请选择查询方式'});a.Open();}},orderInfo:function(){$('.novip').hide();},orderResult:function(){$('#reg').hide();$('#regbox').hide();},customIndex:function(){$('#logout').hide();$('.modifypass').hide();},orderQuery:function(){$('#li_notlogin').click();$('.query').undelegate('#li_login','click');$('#RegPassLink').hide();$('.reggift').hide();}};window.wxcity=wxcity;var usessionid=utils.getUrlParam('usessionid'),ticket=utils.getUrlParam('ticket',true),sticket=utils.getUrlParam('sticket');var YDWXCS=utils.getStorage('YDWXCS');YDWXCS=YDWXCS?YDWXCS:{};var isFoot=1;var isHead=1;var isLogin=0;var areacode=utils.getUrlParam('AreaCode',true);var portaltype=utils.getUrlParam('portaltype',true);var portal=null;if(portaltype!=null){if(portaltype==0||portaltype==1){portal='wap';}
else if(portaltype==2){portal='app';}}
else if(YDWXCS&&YDWXCS.data&&YDWXCS.data){if(YDWXCS.data.IsHead){portal='wap';}
else{portal='app';}}
if(YDWXCS&&YDWXCS.data){if(YDWXCS.data.Foot){isFoot=0;if(portal=='wap'){$('#ydwxcsF').html(YDWXCS.data.Foot);}}
if(areacode==null||areacode.length==0){areacode=YDWXCS.data.AreaCode;}
isLogin=YDWXCS.data.IsLogin;if(!YDWXCS.data.IsFoot){isFoot=0;}
if(!YDWXCS.data.IsHead){isHead=0;}
if(!usessionid){usessionid=YDWXCS.usessionid;}if(!ticket){ticket=YDWXCS.ticket;}
if(!sticket){sticket=YDWXCS.sticket;}
utils.setStorage('YDWXCS',JSON.stringify(YDWXCS));}
switch(portaltype){case'0':case'1':isFoot=1;isHead=1;break;case'2':isFoot=0;isHead=0;break;default:break;}
var param={SourceId:SALES.data.sourceid,Sales:SALES.data.sales,AreaCode:areacode,UseSsionid:usessionid,Ticket:ticket,IsFoot:isFoot,IsHead:isHead,IsLogin:isLogin,STicket:sticket};if(ticket!=null&&areacode!=null&&isLogin<=0){utils.removeStorage('USERINFO',true);}
$.ajax({url:utils.website+'/Other/GetWCityData',data:param,type:'post',dataType:'json',success:function(data){if(data&&data.Data){SALES.timeout=data.Data.ExpiredTime;SALES.timeby=true;utils.setStorage('SALES',JSON.stringify(SALES));var footHtml=null;if(YDWXCS&&YDWXCS.data&&YDWXCS.data.Foot){footHtml=YDWXCS.data.Foot;}
YDWXCS={timeout:data.ExpiredTime,data:data.Data,timeby:1};if(data.Data.Head){$('#ydwxcsH').html(data.Data.Head);YDWXCS.data.CityName=$('a.cityon').html();}
if(usessionid&&ticket){YDWXCS.usessionid=usessionid;YDWXCS.ticket=ticket;}
if(sticket){YDWXCS.sticket=sticket;}
if(data.User){var d={timeout:data.User.ExpiredTime,data:data.User};YDWXCS.data.IsLogin=1;utils.setStorage('USERINFO',JSON.stringify(d));}
if(data.Data.Foot&&portal=='wap'){$('#ydwxcsF').html(data.Data.Foot);}
if(!YDWXCS.data.Foot){YDWXCS.data.Foot=footHtml;$('#ydwxcsF').html(footHtml);}
utils.setStorage('YDWXCS',JSON.stringify(YDWXCS));if(usessionid&&ticket&&!data.User&&isLogin<=0){var backUrl='http://'+window.location.host+'/html5/';window.location.href='http://120.197.232.22:80/sso-core/singlesignon?backurl='+backUrl+'&portaltype=x';}}},error:function(err){}});}}!void function(ua){if(/opera/i.test(ua)){ctripmobi.utils.JumpUrl('/wap/',null,true);}
if(window.screen.height>=568){var s=document.querySelector("meta[name=viewport]");if(s)s.content="width=320.1,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui";}}(window.navigator.userAgent);})(window,$,ctripmobi.utils);